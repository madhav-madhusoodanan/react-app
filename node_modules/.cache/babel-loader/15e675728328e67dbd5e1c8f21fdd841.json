{"ast":null,"code":"import _regeneratorRuntime from\"/home/madhav/Documents/freelancers/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/madhav/Documents/freelancers/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/madhav/Documents/freelancers/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useCallback,useEffect,useState}from\"react\";import{Divider}from\"antd\";import{AnimatePresence,motion}from\"framer-motion\";import{CloseOutlined}from\"@ant-design/icons\";import{useAppDispatch}from\"../hooks\";import{setActivePlot}from\"../actions/plotsSlice\";import LAND_IMG from\"../assets/images/SampleLandImage.png\";import{BuyPlot,ViewPlot}from\".\";import{fetchMetadata}from\"../data\";export default function PlotDetail(_ref){var _plot$id$toString$len,_plotMetadata$image,_plotMetadata$descrip;var plot=_ref.plot,contracts=_ref.contracts,injectedProvider=_ref.injectedProvider;var _useState=useState({}),_useState2=_slicedToArray(_useState,2),plotMetadata=_useState2[0],setPlotMetadata=_useState2[1];var dispatch=useAppDispatch();var fetchPlotMetadata=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var plotUri,plotManifestBuffer;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return contracts.CityDaoParcel.getTokenMetadataUri(plot.id);case 2:plotUri=_context.sent;_context.next=5;return fetchMetadata(plotUri);case 5:plotManifestBuffer=_context.sent;return _context.abrupt(\"return\",JSON.parse(plotManifestBuffer.toString()));case 7:case\"end\":return _context.stop();}}},_callee);})),[contracts,plot.id]);useEffect(function(){fetchPlotMetadata().then(setPlotMetadata);},[contracts,plot]);return/*#__PURE__*/React.createElement(AnimatePresence,null,/*#__PURE__*/React.createElement(\"div\",{className:\"plot-detail\"},/*#__PURE__*/React.createElement(\"div\",{className:\"plot-detail-header flex justify-between items-center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"flex justify-start\"},/*#__PURE__*/React.createElement(\"span\",{className:\"plot-title primary-font text-lg font-medium leading-6 mr-4\"},\"Plot #\",\"0\".repeat(4-((_plot$id$toString$len=plot.id.toString().length)!==null&&_plot$id$toString$len!==void 0?_plot$id$toString$len:0)),plot.id),/*#__PURE__*/React.createElement(\"span\",{className:\"plot-price secondary-font text-base font-light text-gray-9 leading-6\"},(plot===null||plot===void 0?void 0:plot.price)&&\"(\".concat(plot.price.toString(),\" ETH)\"))),/*#__PURE__*/React.createElement(\"a\",{onClick:function onClick(){return dispatch(setActivePlot(undefined));}},/*#__PURE__*/React.createElement(CloseOutlined,{style:{fontSize:20}}))),/*#__PURE__*/React.createElement(Divider,null),/*#__PURE__*/React.createElement(\"div\",{className:\"plot-detail-content block p-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"flex flex-col space-y-4 primary-font text-lg\"},/*#__PURE__*/React.createElement(motion.img,{src:(_plotMetadata$image=plotMetadata===null||plotMetadata===void 0?void 0:plotMetadata.image)!==null&&_plotMetadata$image!==void 0?_plotMetadata$image:LAND_IMG,alt:plot===null||plot===void 0?void 0:plot.id.toString(),initial:{x:-300,opacity:0},animate:{x:0,opacity:1},exit:{x:-300,opacity:0}}),/*#__PURE__*/React.createElement(motion.div,{initial:{x:-300,opacity:0},animate:{x:0,opacity:1},exit:{x:-300,opacity:0},transition:{delay:0.1}},(plot===null||plot===void 0?void 0:plot.sold)?/*#__PURE__*/React.createElement(ViewPlot,{plot:plot}):/*#__PURE__*/React.createElement(BuyPlot,{plot:plot,injectedProvider:injectedProvider})),/*#__PURE__*/React.createElement(motion.div,{className:\"border-gray-4 text-left\",initial:{x:-300,opacity:0},animate:{x:0,opacity:1},exit:{x:-300,opacity:0},transition:{delay:0.2}},/*#__PURE__*/React.createElement(\"div\",{className:\"p-4 text-white\"},\"Properties\"),/*#__PURE__*/React.createElement(Divider,null),/*#__PURE__*/React.createElement(\"div\",{className:\"flex flex-col justify-between p-4\"},plot.metadata.location&&/*#__PURE__*/React.createElement(\"div\",{className:\"py-2 secondary-font text-base font-light text-gray-9\"},\"Location: \",plot.metadata.location),plotMetadata.terrain&&/*#__PURE__*/React.createElement(\"div\",{className:\"py-2 secondary-font text-base font-light text-gray-9\"},\"Terrain: \",plotMetadata.terrain),plotMetadata.sqft&&/*#__PURE__*/React.createElement(\"div\",{className:\"py-2 secondary-font text-base font-light text-gray-9\"},\"Size: \",plotMetadata.sqft),plot.metadata.coordinates&&/*#__PURE__*/React.createElement(\"div\",{className:\"py-2 secondary-font text-base font-light text-gray-9\"},\"Coordinates:\",/*#__PURE__*/React.createElement(\"br\",null),plot.metadata.coordinates),!plotMetadata.sqft&&!plotMetadata.terrain&&!plot.metadata.location&&!plot.metadata.coordinates&&/*#__PURE__*/React.createElement(\"div\",{className:\"py-2 secondary-font text-base font-light text-gray-9\"},\"No plot properties available.\"))),/*#__PURE__*/React.createElement(motion.div,{className:\"border-gray-4 text-left\",initial:{x:-300,opacity:0},animate:{x:0,opacity:1},exit:{x:-300,opacity:0},transition:{delay:0.4}},/*#__PURE__*/React.createElement(\"div\",{className:\"p-4 text-white\"},\"Owner Rights\"),/*#__PURE__*/React.createElement(Divider,null),/*#__PURE__*/React.createElement(\"div\",{className:\"flex flex-col justify-between p-4 secondary-font text-base font-light text-gray-9\"},(_plotMetadata$descrip=plotMetadata===null||plotMetadata===void 0?void 0:plotMetadata.description)!==null&&_plotMetadata$descrip!==void 0?_plotMetadata$descrip:\"Could not retrieve owner rights from the contract.\"))))));}","map":null,"metadata":{},"sourceType":"module"}